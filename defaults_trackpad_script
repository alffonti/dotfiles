#!/bin/bash

# Function to disable trackpad gestures
disable_trackpad_features() {
    echo "Disabling trackpad gestures..."
    defaults write com.apple.AppleMultitouchTrackpad TrackpadMomentumScroll -bool false
    defaults write com.apple.AppleMultitouchTrackpad TrackpadPinch -bool false
    defaults write com.apple.AppleMultitouchTrackpad TrackpadRotate -bool false
    defaults write com.apple.AppleMultitouchTrackpad TrackpadCornerSecondaryClick -bool false
    defaults write com.apple.AppleMultitouchTrackpad TrackpadFiveFingerPinchGesture -bool false
    defaults write com.apple.AppleMultitouchTrackpad TrackpadFourFingerHorizSwipeGesture -bool false
    defaults write com.apple.AppleMultitouchTrackpad TrackpadFourFingerPinchGesture -bool false
    defaults write com.apple.AppleMultitouchTrackpad TrackpadFourFingerVertSwipeGesture -bool false
    defaults write com.apple.AppleMultitouchTrackpad TrackpadThreeFingerHorizSwipeGesture -bool false
    defaults write com.apple.AppleMultitouchTrackpad TrackpadThreeFingerVertSwipeGesture -bool false
    defaults write com.apple.AppleMultitouchTrackpad TrackpadThreeFingerTapGesture -bool false
    defaults write com.apple.AppleMultitouchTrackpad TrackpadTwoFingerDoubleTapGesture -bool false
    defaults write com.apple.AppleMultitouchTrackpad TrackpadTwoFingerFromRightEdgeSwipeGesture -bool false
    defaults write com.apple.AppleMultitouchTrackpad TrackpadThreeFingerDrag -bool false
    defaults write com.apple.AppleMultitouchTrackpad ActuateDetents -bool false
    defaults write com.apple.AppleMultitouchTrackpad TrackpadHorizScroll -bool false
    defaults write com.apple.AppleMultitouchTrackpad USBMouseStopsTrackpad -bool false
    echo "Trackpad gestures disabled."
}

# Function to enable trackpad features
enable_trackpad_features() {
    echo "Enabling essential trackpad features..."
    defaults write com.apple.AppleMultitouchTrackpad TrackpadScroll -bool true
    defaults write com.apple.AppleMultitouchTrackpad Clicking -bool true
    echo "Essential trackpad features enabled."
}

# Function to restart System Preferences
done_applying() {
    echo "Restarting System Preferences to apply changes..."
    killall "System Preferences" 2>/dev/null
    echo "System Preferences restarted."
}

# Main script logic
case "$1" in
    disable)
        disable_trackpad_features
        ;;
    enable)
        enable_trackpad_features
        ;;
    *)
        echo "Usage: $0 {disable|enable}"
        exit 1
        ;;
esac

done_applying

echo "Trackpad configuration script executed successfully."
